{"ast":null,"code":"function selectPoints(array = [], radius = 15, primary = 'x', secondary = 'y') {\n  let i = 0;\n  const result = [];\n  for (; i < array.length;) {\n    if (i >= array.length) {\n      break;\n    }\n    const current = array[i];\n    if (result.length === 0) {\n      result.push(current);\n      i += 1;\n      continue;\n    }\n    const lastResultIndex = result.length - 1;\n    const previous = result[lastResultIndex];\n    if (current[primary] - previous[primary] < radius && Math.abs(current[secondary] - previous[secondary]) < radius) {\n      if (current.intensitySum > previous.intensitySum) {\n        result[lastResultIndex] = current;\n        i += 1;\n        continue;\n      } else {\n        i += 1;\n        continue;\n      }\n    } else {\n      result.push(current);\n      i += 1;\n    }\n  }\n  return result;\n}\nexport default function NMS(array = [], radius = 15) {\n  if (array.length <= 1) {\n    return array;\n  }\n  const sortedX = array.sort((a, b) => a.x - b.x || a.y - b.y);\n  const sortedY = selectPoints(sortedX, radius).sort((a, b) => a.y - b.y || a.x - b.x);\n  return selectPoints(sortedY, radius, 'y', 'x');\n}\n_c = NMS;\nvar _c;\n$RefreshReg$(_c, \"NMS\");","map":{"version":3,"names":["selectPoints","array","radius","primary","secondary","i","result","length","current","push","lastResultIndex","previous","Math","abs","intensitySum","NMS","sortedX","sort","a","b","x","y","sortedY","_c","$RefreshReg$"],"sources":["C:/Users/reddy/Documents/Projects/Engagement Tracker/engagement-tracker-react/src/util/nms.js"],"sourcesContent":["import type { CornerPoint } from './types';\r\n\r\ntype SortField = 'x' | 'y';\r\n\r\nfunction selectPoints(\r\n  array: CornerPoint[] = [],\r\n  radius: number = 15,\r\n  primary: SortField = 'x',\r\n  secondary: SortField = 'y',\r\n): CornerPoint[] {\r\n  let i = 0;\r\n  const result: CornerPoint[] = [];\r\n  for (; i < array.length;) {\r\n    if (i >= array.length) {\r\n      break;\r\n    }\r\n    const current = array[i];\r\n    if (result.length === 0) {\r\n      result.push(current);\r\n      i += 1;\r\n      continue;\r\n    }\r\n    const lastResultIndex = result.length - 1;\r\n    const previous = result[lastResultIndex];\r\n    if ((current[primary] - previous[primary]) < radius\r\n      && Math.abs(current[secondary] - previous[secondary]) < radius) {\r\n      if (current.intensitySum > previous.intensitySum) {\r\n        result[lastResultIndex] = current;\r\n        i += 1;\r\n        continue;\r\n      } else {\r\n        i += 1;\r\n        continue;\r\n      }\r\n    } else {\r\n      result.push(current);\r\n      i += 1;\r\n    }\r\n  }\r\n  return result;\r\n}\r\n\r\nexport default function NMS(\r\n  array: CornerPoint[] = [],\r\n  radius: number = 15,\r\n): CornerPoint[] {\r\n  if (array.length <= 1) {\r\n    return array;\r\n  }\r\n  const sortedX = array.sort((a, b) => a.x - b.x || a.y - b.y);\r\n  const sortedY = selectPoints(sortedX, radius).sort((a, b) => a.y - b.y || a.x - b.x);\r\n  return selectPoints(sortedY, radius, 'y', 'x');\r\n}"],"mappings":"AAIA,SAASA,YAAYA,CACnBC,KAAoB,GAAG,EAAE,EACzBC,MAAc,GAAG,EAAE,EACnBC,OAAkB,GAAG,GAAG,EACxBC,SAAoB,GAAG,GAAG,EACX;EACf,IAAIC,CAAC,GAAG,CAAC;EACT,MAAMC,MAAqB,GAAG,EAAE;EAChC,OAAOD,CAAC,GAAGJ,KAAK,CAACM,MAAM,GAAG;IACxB,IAAIF,CAAC,IAAIJ,KAAK,CAACM,MAAM,EAAE;MACrB;IACF;IACA,MAAMC,OAAO,GAAGP,KAAK,CAACI,CAAC,CAAC;IACxB,IAAIC,MAAM,CAACC,MAAM,KAAK,CAAC,EAAE;MACvBD,MAAM,CAACG,IAAI,CAACD,OAAO,CAAC;MACpBH,CAAC,IAAI,CAAC;MACN;IACF;IACA,MAAMK,eAAe,GAAGJ,MAAM,CAACC,MAAM,GAAG,CAAC;IACzC,MAAMI,QAAQ,GAAGL,MAAM,CAACI,eAAe,CAAC;IACxC,IAAKF,OAAO,CAACL,OAAO,CAAC,GAAGQ,QAAQ,CAACR,OAAO,CAAC,GAAID,MAAM,IAC9CU,IAAI,CAACC,GAAG,CAACL,OAAO,CAACJ,SAAS,CAAC,GAAGO,QAAQ,CAACP,SAAS,CAAC,CAAC,GAAGF,MAAM,EAAE;MAChE,IAAIM,OAAO,CAACM,YAAY,GAAGH,QAAQ,CAACG,YAAY,EAAE;QAChDR,MAAM,CAACI,eAAe,CAAC,GAAGF,OAAO;QACjCH,CAAC,IAAI,CAAC;QACN;MACF,CAAC,MAAM;QACLA,CAAC,IAAI,CAAC;QACN;MACF;IACF,CAAC,MAAM;MACLC,MAAM,CAACG,IAAI,CAACD,OAAO,CAAC;MACpBH,CAAC,IAAI,CAAC;IACR;EACF;EACA,OAAOC,MAAM;AACf;AAEA,eAAe,SAASS,GAAGA,CACzBd,KAAoB,GAAG,EAAE,EACzBC,MAAc,GAAG,EAAE,EACJ;EACf,IAAID,KAAK,CAACM,MAAM,IAAI,CAAC,EAAE;IACrB,OAAON,KAAK;EACd;EACA,MAAMe,OAAO,GAAGf,KAAK,CAACgB,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAKD,CAAC,CAACE,CAAC,GAAGD,CAAC,CAACC,CAAC,IAAIF,CAAC,CAACG,CAAC,GAAGF,CAAC,CAACE,CAAC,CAAC;EAC5D,MAAMC,OAAO,GAAGtB,YAAY,CAACgB,OAAO,EAAEd,MAAM,CAAC,CAACe,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAKD,CAAC,CAACG,CAAC,GAAGF,CAAC,CAACE,CAAC,IAAIH,CAAC,CAACE,CAAC,GAAGD,CAAC,CAACC,CAAC,CAAC;EACpF,OAAOpB,YAAY,CAACsB,OAAO,EAAEpB,MAAM,EAAE,GAAG,EAAE,GAAG,CAAC;AAChD;AAACqB,EAAA,GAVuBR,GAAG;AAAA,IAAAQ,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}